{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/20191014-styled-components-the-interesting-parts/","result":{"data":{"site":{"siteMetadata":{"title":"Artem Demo, indie developer","author":"Artem Demo"}},"markdownRemark":{"id":"e4387e2e-e59d-5736-b10e-2d19519e0ef4","excerpt":"The whole logic of styled-components can be described in one “feature request”: “Let’s manage CSS in js alongside with component core code”. The logic behind it is sort of obvious - it will give us the dynamic of js inside of CSS and we’ll be able to treat styling as part of component code and not store it in a separate file. The idea is promising, now let’s see what are some of the edge cases. And why is that? Because nothing is ideal in the world.","html":"<p>The whole logic of styled-components can be described in one “feature request”: “Let’s manage CSS in js alongside with component core code”. The logic behind it is sort of obvious - it will give us the dynamic of js inside of CSS and we’ll be able to treat styling as part of component code and not store it in a separate file.</p>\n<p>The idea is promising, now let’s see what are some of the edge cases. And why is that? Because nothing is ideal in the world.</p>\n<!-- end -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4528a79f89ac777f91f0a29961ff4ae5/39600/styled-components.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgUlEQVQoz0WS6U7CQBSF+6IGla0sEYmCgEsCaAj/BLrRlkVjwMQHMsx0QV/keGZK448vZ2ba+ebObQ1hV6GQdgXCUZQ1B6cE4VUgwwZk0Mhy3YDw+cy7gFie8M9PFCCCAgxpmZAWpZaSZmItt8uQXg3Ruo1oZeLbbiHatrmxioN7ycOKOCyZGiXO5IZY1KBQYqHJxMKi2Ksj8ltIwzMIt8AqW9xsUljkvKSlObnckHNeY16HXCiUOJdT7NSRvvVx3I8Rr1ip34Rc1rO2uDklHvAvN+SML80VFM9Y7cw8wWvPq4iDG6TbPpJNF3HYzqpfUGARmzK7qMWHk9gQr01oKI69DrlFvCQ+CTqIPFbmXnHO9JhBm1wT9lRzpfudf0xWeM3qyIy92o7ws5/iZ6eYcDzB7+cUxw+u716YQ+aY68847tS7I/x+Tdgatskx9d9ixE4f6WqIJHhEEj4h8Qcc37MiXjNU474mDnpINw/MLpJVD8latUHlHZLtAOl7D9Kt4A8qHsyvAOXksAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Styled-components\"\n        title=\"Styled-components\"\n        src=\"/static/4528a79f89ac777f91f0a29961ff4ae5/27330/styled-components.png\"\n        srcset=\"/static/4528a79f89ac777f91f0a29961ff4ae5/3c361/styled-components.png 148w,\n/static/4528a79f89ac777f91f0a29961ff4ae5/03654/styled-components.png 295w,\n/static/4528a79f89ac777f91f0a29961ff4ae5/27330/styled-components.png 590w,\n/static/4528a79f89ac777f91f0a29961ff4ae5/39600/styled-components.png 700w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Referencing existing component</h2>\n<p>Let’s say we need to reference the style of sibling component status. The simple example will be - custom radio button. I want to change the CSS of a sibling component based on whether Input is checked or not. In this case, I definitely need the class name. But I don’t have it, because styled-components will generate class later.</p>\n<p>I can solve it by reference to the component itself. The library will later replace it with the generated class name.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> RadioMark <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>span<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    display: inline-block;\n    position: relative;\n    border: 1px solid #777777;\n    width: 14px;\n    height: 14px;\n    left: 0;\n    border-radius: 50%;\n    margin-right: 10px;\n    vertical-align: middle;\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> RadioInput <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>input<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    position: absolute;\n    visibility: hidden;\n    display: none;\n    &amp;:checked + </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>RadioMark<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> {\n        &amp;::after {\n            content: '';\n            display: block;\n            width: 10px;\n            height: 10px;\n            border-radius: 50%;\n            background-color: blue;\n            left: 2px;\n            top: 15%;\n            position: absolute;\n        }\n    }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Live example:</p>\n<iframe src=\"https://codesandbox.io/embed/radio-button-getgl?fontsize=14\" title=\"Radio Button\" allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<br />\n<br />\n<h2>Update attributes via styled-components API</h2>\n<p>Another interesting example is - how to change the attribute of the component. We certainly can do it directly via component props. But what about changing styling directly? I would like to define every style change in one place.</p>\n<p>Another reason for this approach is often style changes. You see, styled-components will create a separate class for each change and will dynamically shuffle them when needed. It’s not always desired behavior and could affect performance. A much better solution will be to update an attribute directly.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> Logo <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token punctuation\">.</span><span class=\"token function\">attrs</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        backgroundImage<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">selectLogo</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    width: 30px;\n    height: 30px;\n    background-size: contain;\n    background-repeat: no-repeat;\n    display: inline-block;\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Wrap existing component in styled, but do not pass all props</h2>\n<p>Some components don’t like to receive props that are not defined. If you have access to the source code of such components, then you can decide whether you want to change this behavior or not. But often it’s not the case especially if this component came from a 3rd party library.</p>\n<p>The easy solution will be to filter out such properties. We can do it simply with the destructuring method of ES6. You just need to explicitly define which values are not desired and use the rest.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// &lt;Link /> is expecting certain list of props.</span>\n<span class=\"token comment\">// It will print a warning for unknown props, therefore I'm filtering it out.</span>\n\n<span class=\"token keyword\">const</span> StyledLink <span class=\"token operator\">=</span> <span class=\"token function\">styled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> warning<span class=\"token punctuation\">,</span> danger<span class=\"token punctuation\">,</span> general<span class=\"token punctuation\">,</span> theme<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>Link <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>rest<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token function\">styleGen</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Styled-components - the interesting parts","date":"October 14, 2019","tags":["styled-components"]}}},"pageContext":{"slug":"/20191014-styled-components-the-interesting-parts/","previous":{"fields":{"slug":"/20191012-deliberately-painful-ui/"},"frontmatter":{"title":"Deliberately painful UI","tags":["ui"]}},"next":{"fields":{"slug":"/20191021-my-cli-shortcuts-for-git/"},"frontmatter":{"title":"My CLI shortcuts for git","tags":["cli","git"]}}}},"staticQueryHashes":[]}