<!DOCTYPE html><html lang="en"><head><title>Test whether variable is a number | Artem Demo</title><link rel="icon" type="image/x-icon" href="/./assets/favicon-dec32dcbac.ico"><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="description" content="Blog about web development, indie GameDev"><meta property="og:title" content="Test whether variable is a number"><meta property="og:description" content="Blog about web development, indie GameDev"><link rel="stylesheet" href="/./assets/code-theme-36bdf5f7fe.css"><link rel="stylesheet" href="/./assets/site.render-5d1535d9c3.css"><script async src="https://www.googletagmanager.com/gtag/js?id=G-3BCNZ31TWL"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3BCNZ31TWL');</script></head><body><div><div class="header-wrapper"><div class="container"><div class="header-container"><div class="header-item header-item__logo"><a class="header-logo-link" href="/">Artem Demo &lt;/&gt;</a></div><div class="header-item header-item__menu"><div class="header-item-menu"><div class="top-menu"><div class="top-menu_item top-menu_item__active"><a class="top-menu_link" href="/">Blog</a></div><div class="top-menu_item"><a class="top-menu_link" href="/about/">About</a></div><div class="top-menu_item"><a class="top-menu_link" href="/contact/">Contact me</a></div></div></div></div></div><div class="header-separator"></div></div></div><div class="container"><div class="ContentWrapper"><h1>Test whether variable is a number</h1><div class="secondary-text">18 July, 2020</div><div class="secondary-text">Tags:Â <a class="post-tags-item" href="/blog/tag/number/">number</a><a class="post-tags-item" href="/blog/tag/vanilla-js/">vanilla-js</a></div><p>The post title &quot;Test whether variable is a number&quot; looks like a trivial question, but let&#x27;s dig deeper and try to cover all edge cases. I will split it into two problems and will cover them separately.</p><h2>isNumber</h2><p>First I&#x27;ll start with the simple problem. You have variable that may or may not be a number. Write a function <code class="hljs"><span class="hljs">isNumber()</span></code> that will return <code class="hljs"><span class="hljs"><span class="hljs-literal">true</span></span></code> if it is in fact &#x27;number&#x27; or <code class="hljs"><span class="hljs"><span class="hljs-literal">false</span></span></code> otherwise.</p><p>Here I only need to check the type of given variable. In this situation I have two edge cases.</p><p>The first one is <code class="hljs"><span class="hljs">NaN</span></code>, which has a <code class="hljs"><span class="hljs"><span class="hljs-built_in">number</span></span></code> type, but is not a meaningful number, since I can&#x27;t use it in any calculation. And it&#x27;s up to the developer to decide how to handle this situation. By the way <code class="hljs"><span class="hljs">lodash/isNumber</span></code> is not covering <code class="hljs"><span class="hljs">NaN</span></code> case and will return <code class="hljs"><span class="hljs"><span class="hljs-literal">true</span></span></code> for <code class="hljs"><span class="hljs">NaN</span></code>. Which is technically correct, but still I prefer not to call it a number.</p><p>The second edge case is not frequent, but since JS allows it, we will cover it as well. User has additional way to define a number, by using <code class="hljs"><span class="hljs"><span class="hljs-title class_">Number</span></span></code> as a constructor, like this:</p><pre><code class="language-js hljs"><span class="hljs"><span class="hljs-keyword">const</span> num = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(<span class="hljs-number">2</span>);
</span></code></pre><p>In this case the type of <code class="hljs"><span class="hljs">num</span></code> variable will be an <code class="hljs"><span class="hljs"><span class="hljs-built_in">object</span></span></code>, when in fact it will act as a number in all other cases. So we need to check for that as well.</p><pre><code class="language-js hljs"><span class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isNumber</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-comment">// `isNaN` is build in global function, that is supported since IE6</span>
  <span class="hljs-comment">// (Since ES6, we also have `Number.isNaN` method which make more since, then global function)</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(value)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Number</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === &#x27;number&#x27;;
}
</span></code></pre><p>Ok, now let&#x27;s see the test cases:</p><pre><code class="language-js hljs"><span class="hljs"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">isNumber</span>(<span class="hljs-number">2</span>) === <span class="hljs-literal">true</span>, &#x27;should validate regular number&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">isNumber</span>(&#x27;<span class="hljs-literal">true</span>&#x27;) === <span class="hljs-literal">false</span>, &#x27;should validate string&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">isNumber</span>(&#x27;<span class="hljs-number">7</span>&#x27;) === <span class="hljs-literal">false</span>, &#x27;should validate string <span class="hljs-keyword">as</span> number&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">isNumber</span>(<span class="hljs-title class_">NaN</span>) === <span class="hljs-literal">false</span>, &#x27;should validate <span class="hljs-title class_">NaN</span>&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">isNumber</span>(<span class="hljs-title class_">Number</span>(<span class="hljs-number">10</span>)) === <span class="hljs-literal">true</span>, &#x27;should validate <span class="hljs-title class_">Number</span>&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(
  <span class="hljs-title function_">isNumber</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(<span class="hljs-number">5</span>)) === <span class="hljs-literal">true</span>,
  &#x27;should validate <span class="hljs-title class_">Number</span> constructor&#x27;,
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">isNumber</span>(<span class="hljs-literal">true</span>) === <span class="hljs-literal">false</span>, &#x27;should validate boolean&#x27;);
</span></code></pre><h2>couldBeNumber</h2><p>Now let&#x27;s solve a more complicated case, that is related to types magic of JS.</p><p>You have a variable that may or may not be a number, but it can be converted to a number in the meaningful way. For example string &#x27;2&#x27; can be converted to number 2, but boolean <code class="hljs"><span class="hljs"><span class="hljs-literal">true</span></span></code> cannot. Write a function <code class="hljs"><span class="hljs">couldBeNumber()</span></code> that will return <code class="hljs"><span class="hljs"><span class="hljs-literal">true</span></span></code> if it is in fact number or <code class="hljs"><span class="hljs"><span class="hljs-literal">false</span></span></code> otherwise.</p><pre><code class="language-js hljs"><span class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">couldBeNumber</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-comment">// First lets check whether given value is a string.</span>
  <span class="hljs-comment">// Here I&#x27;m also covering the case when value defined via constructor `new String()`.</span>
  <span class="hljs-keyword">const</span> isString = <span class="hljs-keyword">typeof</span> value === &#x27;string&#x27; || value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">String</span>;
  <span class="hljs-comment">// If the user gave us a string, then we need to check whether it&#x27;s empty.</span>
  <span class="hljs-comment">// Since string can be created with `String` constructor I need to cast it to the regular string,</span>
  <span class="hljs-comment">// therefore I&#x27;m doing `value + &#x27;&#x27;` (otherwise I can&#x27;t compare it to an empty string).</span>
  <span class="hljs-comment">// By the way, I need to check for an empty string, since `Number(&#x27;&#x27;)` will return `0`.</span>
  <span class="hljs-comment">// And I&#x27;m using `Number` in the first place since this way I can cover integers</span>
  <span class="hljs-comment">// and floats with one conversion method.</span>
  <span class="hljs-keyword">if</span> (isString &amp;&amp; value + &#x27;&#x27; !== &#x27;&#x27;) {
    <span class="hljs-comment">// `Number()` of something that can&#x27;t be converted to number will return `NaN` and</span>
    <span class="hljs-comment">// by specification of ECMAScript `NaN` not equal to `NaN`.</span>
    <span class="hljs-comment">// Therefore I can just compare it to itself.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Number</span>(value) === <span class="hljs-title class_">Number</span>(value);
  }
  <span class="hljs-comment">// In the end I can just use the previously defined `isNumber()` function.</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">isNumber</span>(value);
}
</span></code></pre><p>Now let&#x27;s see the test cases. Half of them are covered in the first part of this post, but I prefer to copy them over here as well.</p><pre><code class="language-js hljs"><span class="hljs"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(
  <span class="hljs-title function_">couldBeNumber</span>(&#x27;<span class="hljs-number">1</span>&#x27;) === <span class="hljs-literal">true</span>,
  &#x27;should validate string <span class="hljs-keyword">as</span> a <span class="hljs-title function_">number</span> (integer)&#x27;,
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(
  <span class="hljs-title function_">couldBeNumber</span>(&#x27;<span class="hljs-number">1.2</span>&#x27;) === <span class="hljs-literal">true</span>,
  &#x27;should validate string <span class="hljs-keyword">as</span> a <span class="hljs-title function_">number</span> (float)&#x27;,
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(
  <span class="hljs-title function_">couldBeNumber</span>(&#x27;-<span class="hljs-number">1.2</span>&#x27;) === <span class="hljs-literal">true</span>,
  &#x27;should validate string <span class="hljs-keyword">as</span> a <span class="hljs-title function_">number</span> (negative float)&#x27;,
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(
  <span class="hljs-title function_">couldBeNumber</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(&#x27;<span class="hljs-number">5</span>&#x27;)) === <span class="hljs-literal">true</span>,
  &#x27;should validate string <span class="hljs-keyword">as</span> a <span class="hljs-title function_">number</span> (<span class="hljs-title class_">String</span> constructor)&#x27;,
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">couldBeNumber</span>(&#x27;&#x27;) === <span class="hljs-literal">false</span>, &#x27;should validate empty string&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">couldBeNumber</span>(&#x27;a&#x27;) === <span class="hljs-literal">false</span>, &#x27;should validate string&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">couldBeNumber</span>(<span class="hljs-number">2</span>) === <span class="hljs-literal">true</span>, &#x27;should validate regular number&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">couldBeNumber</span>(<span class="hljs-title class_">NaN</span>) === <span class="hljs-literal">false</span>, &#x27;should validate <span class="hljs-title class_">NaN</span>&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">couldBeNumber</span>(<span class="hljs-title class_">Number</span>(<span class="hljs-number">10</span>)) === <span class="hljs-literal">true</span>, &#x27;should validate <span class="hljs-title class_">Number</span>&#x27;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(
  <span class="hljs-title function_">couldBeNumber</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(<span class="hljs-number">5</span>)) === <span class="hljs-literal">true</span>,
  &#x27;should validate <span class="hljs-title class_">Number</span> constructor&#x27;,
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title function_">couldBeNumber</span>(<span class="hljs-literal">true</span>) === <span class="hljs-literal">false</span>, &#x27;should validate boolean&#x27;);
</span></code></pre></div></div></div></body></html>